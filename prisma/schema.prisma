// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// 1. Profile Model
model Profile {
  id        String   @id @default(uuid())
  fullName  String
  email     String   @unique
  bio       String?
  title     String?  // e.g. "Ful Stack Dev"
  location  String?  // e.g. "Gurgaon/Remote"
  resumeUrl String?  // link to PDF
  
  // Relations 
  education  Education[]
  experience Experience[]
  skills     Skill[]
  projects   Project[]
  socials    SocialLink[]
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// Education Model
model Education {
  id          String   @id @default(uuid())
  institution String   // e.g. Graphic Era Deemed University
  degree      String   // e.g. MCA
  startDate   DateTime
  endDate     DateTime? // Null means "Present"
  score       String?   // e.g. "CGPA: 8.1/10"
  
  profileId   String
  profile     Profile  @relation(fields: [profileId], references: [id], onDelete: Cascade)
}

// Experience Model (Internships/Jobs)
model Experience {
  id          String   @id @default(uuid())
  company     String
  role        String
  startDate   DateTime
  endDate     DateTime?
  description String?   // Bullet points "\n" separated
  
  profileId   String
  profile     Profile  @relation(fields: [profileId], references: [id], onDelete: Cascade)
}

// Projects Model
model Project {
  id          String   @id @default(uuid())
  title       String
  description String
  techStack   String[] // Array support in Postgres
  repoUrl     String?
  liveUrl     String?
  
  profileId   String
  profile     Profile  @relation(fields: [profileId], references: [id], onDelete: Cascade)
}

// skills Model
model Skill {
  id          String @id @default(uuid())
  name        String // e.g. "React.js"
  category    String // e.g. "Frontend", "Backend"
  proficiency String? // e.g. "Advanced"
  
  profileId   String
  profile     Profile @relation(fields: [profileId], references: [id], onDelete: Cascade)
}

// 6. Social Links
model SocialLink {
  id        String @id @default(uuid())
  platform  String // e.g. "LinkedIn"
  url       String
  
  profileId String
  profile   Profile @relation(fields: [profileId], references: [id], onDelete: Cascade)
}